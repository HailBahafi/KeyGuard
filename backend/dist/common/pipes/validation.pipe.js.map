{"version":3,"sources":["../../../src/common/pipes/validation.pipe.ts"],"sourcesContent":["// common/pipes/manual-validation.pipe.ts\nimport {\n  ArgumentMetadata,\n  BadRequestException,\n  Injectable,\n  PipeTransform,\n} from '@nestjs/common';\nimport { plainToInstance } from 'class-transformer';\nimport { validate } from 'class-validator';\n\n@Injectable()\nexport class ValidationPipe implements PipeTransform {\n  constructor(private readonly dtoClass: any) {}\n\n  async transform(value: any, metadata: ArgumentMetadata) {\n    const object = plainToInstance(this.dtoClass, value);\n    const errors = await validate(object);\n    if (errors.length > 0) {\n      throw new BadRequestException(\n        errors.map((e) => ({\n          property: e.property,\n          constraints: e.constraints,\n        })),\n      );\n    }\n    return object;\n  }\n}\n"],"names":["ValidationPipe","transform","value","metadata","object","plainToInstance","dtoClass","errors","validate","length","BadRequestException","map","e","property","constraints"],"mappings":"AAAA,yCAAyC;;;;;+BAW5BA;;;eAAAA;;;wBALN;kCACyB;gCACP;;;;;;;;;;AAGlB,IAAA,AAAMA,iBAAN,MAAMA;IAGX,MAAMC,UAAUC,KAAU,EAAEC,QAA0B,EAAE;QACtD,MAAMC,SAASC,IAAAA,iCAAe,EAAC,IAAI,CAACC,QAAQ,EAAEJ;QAC9C,MAAMK,SAAS,MAAMC,IAAAA,wBAAQ,EAACJ;QAC9B,IAAIG,OAAOE,MAAM,GAAG,GAAG;YACrB,MAAM,IAAIC,2BAAmB,CAC3BH,OAAOI,GAAG,CAAC,CAACC,IAAO,CAAA;oBACjBC,UAAUD,EAAEC,QAAQ;oBACpBC,aAAaF,EAAEE,WAAW;gBAC5B,CAAA;QAEJ;QACA,OAAOV;IACT;IAdA,YAAY,AAAiBE,QAAa,CAAE;aAAfA,WAAAA;IAAgB;AAe/C"}