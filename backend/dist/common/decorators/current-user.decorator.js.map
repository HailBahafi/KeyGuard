{"version":3,"sources":["../../../src/common/decorators/current-user.decorator.ts"],"sourcesContent":["import { createParamDecorator, ExecutionContext } from '@nestjs/common';\nimport { FastifyRequest, RouteGenericInterface } from 'fastify';\nimport { User } from 'src/generated/client';\n\nexport type CurrentUserType = User\n\nexport const CurrentUser = createParamDecorator<keyof CurrentUserType | undefined>((data: keyof CurrentUserType | undefined, ctx: ExecutionContext) => {\n  const request = ctx.switchToHttp().getRequest<FastifyRequest<RouteGenericInterface> & { user: CurrentUserType }>();\n  const user = request?.[\"user\"] as CurrentUserType;\n\n  if (data) {\n    return user?.[data];\n  }\n  return user;\n});\n"],"names":["CurrentUser","createParamDecorator","data","ctx","request","switchToHttp","getRequest","user"],"mappings":";;;;+BAMaA;;;eAAAA;;;wBAN0C;AAMhD,MAAMA,cAAcC,IAAAA,4BAAoB,EAAoC,CAACC,MAAyCC;IAC3H,MAAMC,UAAUD,IAAIE,YAAY,GAAGC,UAAU;IAC7C,MAAMC,OAAOH,SAAS,CAAC,OAAO;IAE9B,IAAIF,MAAM;QACR,OAAOK,MAAM,CAACL,KAAK;IACrB;IACA,OAAOK;AACT"}